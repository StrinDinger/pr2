(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{31809:function(e,t,a){Promise.resolve().then(a.bind(a,54126))},54126:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return eT}});var s,r,l=a(57437),n=a(2265),i=a(40370),o=a(73618),d=a(94152),c=a(37053),m=a(90535),x=a(61994),h=a(53335);function u(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,h.m6)((0,x.W)(t))}let p=(0,m.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),g=n.forwardRef((e,t)=>{let{className:a,variant:s,size:r,asChild:n=!1,...i}=e,o=n?c.g7:"button";return(0,l.jsx)(o,{ref:t,"data-slot":"button",className:u(p({variant:s,size:r,className:a})),...i})});g.displayName="Button";var f=a(10148),b=a(10407),j=a(30401),v=a(40519);let y=f.fC,N=f.xz;f.ZA,f.Uv,f.Tr,f.Ee,n.forwardRef((e,t)=>{let{className:a,inset:s,children:r,...n}=e;return(0,l.jsxs)(f.fF,{ref:t,className:u("focus:bg-accent data-[state=open]:bg-accent flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none",s&&"pl-8",a),...n,children:[r,(0,l.jsx)(b.Z,{className:"ml-auto h-4 w-4"})]})}).displayName=f.fF.displayName,n.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)(f.tu,{ref:t,className:u("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...s})}).displayName=f.tu.displayName;let w=n.forwardRef((e,t)=>{let{className:a,sideOffset:s=4,...r}=e;return(0,l.jsx)(f.Uv,{children:(0,l.jsx)(f.VY,{ref:t,sideOffset:s,className:u("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...r})})});w.displayName=f.VY.displayName;let k=n.forwardRef((e,t)=>{let{className:a,inset:s,...r}=e;return(0,l.jsx)(f.ck,{ref:t,className:u("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s&&"pl-8",a),...r})});k.displayName=f.ck.displayName,n.forwardRef((e,t)=>{let{className:a,children:s,checked:r,...n}=e;return(0,l.jsxs)(f.oC,{ref:t,className:u("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:r,...n,children:[(0,l.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,l.jsx)(f.wU,{children:(0,l.jsx)(j.Z,{className:"h-4 w-4"})})}),s]})}).displayName=f.oC.displayName,n.forwardRef((e,t)=>{let{className:a,children:s,...r}=e;return(0,l.jsxs)(f.Rk,{ref:t,className:u("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...r,children:[(0,l.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,l.jsx)(f.wU,{children:(0,l.jsx)(v.Z,{className:"h-2 w-2 fill-current"})})}),s]})}).displayName=f.Rk.displayName,n.forwardRef((e,t)=>{let{className:a,inset:s,...r}=e;return(0,l.jsx)(f.__,{ref:t,className:u("px-2 py-1.5 text-sm font-semibold",s&&"pl-8",a),...r})}).displayName=f.__.displayName,n.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)(f.Z0,{ref:t,className:u("-mx-1 my-1 h-px bg-muted",a),...s})}).displayName=f.Z0.displayName;var C=a(77945);let S=[{code:"en",name:"English",nativeName:"English"},{code:"ru",name:"Russian",nativeName:"Русский"}];function P(){let{currentLanguage:e,changeLanguage:t}=(0,d.Z)();return(0,l.jsxs)(y,{children:[(0,l.jsx)(N,{asChild:!0,children:(0,l.jsxs)(g,{variant:"ghost",size:"sm",className:"h-9 w-9 p-0",children:[(0,l.jsx)(C.Z,{className:"h-4 w-4"}),(0,l.jsx)("span",{className:"sr-only",children:"Change language"})]})}),(0,l.jsx)(w,{align:"end",children:S.map(a=>(0,l.jsxs)(k,{onClick:()=>t(a.code),className:"flex items-center justify-between gap-2",children:[(0,l.jsx)("span",{children:a.nativeName}),e===a.code&&(0,l.jsx)(j.Z,{className:"h-4 w-4"})]},a.code))})]})}function A(e){let{onNavigate:t}=e,{t:a,currentLanguage:s,changeLanguage:r}=(0,d.Z)(),[c,m]=(0,n.useState)(!1);return((0,n.useEffect)(()=>{m(!0)},[]),c)?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("header",{className:"bg-white border-b border-gray-200",children:(0,l.jsx)("div",{className:"container mx-auto px-6 py-6",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("h1",{className:"text-2xl font-semibold",children:a("homePage.investorsCalculatorHeader")}),(0,l.jsx)(P,{})]})})}),(0,l.jsx)("main",{className:"container mx-auto px-6 py-12",children:(0,l.jsxs)("div",{className:"grid gap-8 md:grid-cols-1 lg:grid-cols-2 max-w-6xl mx-auto",children:[(0,l.jsx)("button",{onClick:()=>t("portfolioAllocation"),className:"bg-white border-2 border-gray-200 rounded-lg p-12 hover:border-blue-500 hover:shadow-xl transition-all cursor-pointer group",children:(0,l.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,l.jsx)(i.Z,{className:"h-16 w-16 text-gray-400 group-hover:text-blue-500 transition-colors"}),(0,l.jsx)("h2",{className:"text-center",children:a("homePage.portfolioAllocation")}),(0,l.jsx)("p",{className:"text-gray-500 text-center text-sm",children:a("homePage.portfolioAllocationDescription")})]})}),(0,l.jsx)("button",{onClick:()=>t("indexCalculator"),className:"bg-white border-2 border-gray-200 rounded-lg p-12 hover:border-blue-500 hover:shadow-xl transition-all cursor-pointer group",children:(0,l.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,l.jsx)(o.Z,{className:"h-16 w-16 text-gray-400 group-hover:text-blue-500 transition-colors"}),(0,l.jsx)("h2",{className:"text-center",children:a("homePage.investmentCalculator")}),(0,l.jsx)("p",{className:"text-gray-500 text-center text-sm",children:a("homePage.investmentCalculatorDescription")})]})})]})})]}):(0,l.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,l.jsx)("header",{className:"bg-white border-b border-gray-200",children:(0,l.jsx)("div",{className:"container mx-auto px-6 py-6",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("div",{className:"h-8 bg-gray-200 rounded w-48 animate-pulse"}),(0,l.jsx)("div",{className:"h-9 w-9 bg-gray-200 rounded animate-pulse"})]})})})})}var R=a(28842),E=a(20265),M=a(15051),z=a(70525),I=a(32660),F=a(15868),O=a(18930),H=a(99397),L=a(40875),Z=a(88815),_=a(21182),V=a(60474);function D(e){let{className:t,type:a,...s}=e;return(0,l.jsx)("input",{type:a,"data-slot":"input",className:u("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...s})}var T=a(370);function B(e){let{className:t,...a}=e;return(0,l.jsx)(T.f,{"data-slot":"label",className:u("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...a})}var Y=a(204);function W(e){let{value:t,onValueChange:a,placeholder:s,className:r,readOnly:n=!1,decimalsLimit:i=2,decimalScale:o=2,suffix:c="",prefix:m=""}=e,{currentLanguage:x}=(0,d.Z)(),h="ru"===x&&t?t.replace(".",","):t;return(0,l.jsx)(Y.ZP,{value:h,onValueChange:n?void 0:e=>{if(a){let t=e;"ru"===x&&e&&(t=e.replace(",",".")),a(t)}},placeholder:s,decimalsLimit:i,decimalScale:o,decimalSeparator:"ru"===x?",":".",groupSeparator:"ru"===x?" ":",",allowNegativeValue:!1,disabled:n,suffix:c,prefix:m,className:"".concat(r," ").concat(n?"cursor-default":"")})}(s=r||(r={})).MOEX="moex",s.NASDAQ="nasdaq",s.DAX="dax",s.SP500="sp500";class X{async fetchMultiplePrices(e){let t=e.map(async e=>{let t=await this.fetchLastPrice(e);return{ticker:e,price:t}});return(await Promise.all(t)).reduce((e,t)=>{let{ticker:a,price:s}=t;return e[a]=s,e},{})}async makeRequest(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=new URL("".concat(this.config.baseUrl,"/").concat(e));Object.entries(t).forEach(e=>{let[t,s]=e;a.searchParams.append(t,s)});let s=await fetch(a.toString(),{method:"GET",headers:{"Content-Type":"application/json",...this.config.apiKey&&{Authorization:"Bearer ".concat(this.config.apiKey)}},signal:AbortSignal.timeout(this.config.timeout||1e4)});if(!s.ok)throw Error("API Error: ".concat(s.status," ").concat(s.statusText));return s.json()}async healthCheck(){try{return await this.fetchLastPrice("TEST"),!0}catch(e){return!1}}constructor(e,t){this.config=e,this.indexType=t}}class U extends X{async fetchIndexComponents(){return(await this.makeRequest("iss/statistics/engines/stock/markets/index/analytics/IMOEX.json",{limit:"100","iss.only":"analytics","iss.meta":"off","iss.json":"extended"}))[1].analytics.map(e=>({ticker:e.ticker,weight:e.weight,name:e.shortnames}))}async getStockDetails(e){let t=(Array.isArray(e)?e:[e]).join(",");return(await this.makeRequest("iss/engines/stock/markets/shares/boards/TQBR/securities.json",{"securities.columns":"SECID,LOTSIZE,SHORTNAME,PREVPRICE",securities:t,"iss.json":"extended","iss.meta":"off"}))[1].securities.map(e=>({ticker:e.SECID,name:e.SHORTNAME,lotSize:e.LOTSIZE,currentPrice:e.PREVPRICE,currency:"RUB",exchange:"MOEX"}))}async fetchLastPrice(e){try{var t,a;let s=await this.makeRequest("iss/engines/stock/markets/shares/boards/tqbr/trades.json",{reversed:"1",securities:e,limit:"1","iss.meta":"off","iss.only":"trades","iss.json":"extended"});return(null===(a=s[1].trades)||void 0===a?void 0:null===(t=a[0])||void 0===t?void 0:t.PRICE)||null}catch(e){return null}}async searchStocks(e,t){let a={"iss.json":"extended","iss.meta":"off","securities.columns":"SECID,LOTSIZE,SHORTNAME,PREVPRICE"};if(t){let e=Array.isArray(t)?t.join(","):t;a.securities=e}let s=(await this.makeRequest("iss/engines/stock/markets/shares/boards/TQBR/securities.json",a))[1].securities.map(e=>({ticker:e.SECID,name:e.SHORTNAME,lotSize:e.LOTSIZE,currentPrice:e.PREVPRICE,currency:"RUB",exchange:"MOEX"}));if(e){let t=e.toLowerCase();return s.filter(e=>e.ticker.toLowerCase().includes(t)||e.name.toLowerCase().includes(t))}return s}constructor(){super({baseUrl:"https://iss.moex.com",timeout:15e3},r.MOEX)}}class q{static getAPI(e,t){if(!this.instances.has(e)){let t;if(e===r.MOEX)t=new U;else throw Error("Unsupported index type: ".concat(e));this.instances.set(e,t)}return this.instances.get(e)}static getAvailableIndexes(){return Object.values(r)}static async healthCheckAll(){let e={};for(let[t,a]of this.instances)e[t]=await a.healthCheck();return e}}q.instances=new Map;let K=n.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)("div",{ref:t,className:u("rounded-lg bg-card text-card-foreground shadow-sm",a),...s})});K.displayName="Card";let J=n.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)("div",{ref:t,className:u("flex flex-col space-y-1.5 p-6",a),...s})});J.displayName="CardHeader",n.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)("div",{ref:t,className:u("text-2xl font-semibold leading-none tracking-tight",a),...s})}).displayName="CardTitle";let G=n.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)("div",{ref:t,className:u("text-sm text-muted-foreground",a),...s})});G.displayName="CardDescription";let Q=n.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)("div",{ref:t,className:u("p-6 pt-0",a),...s})});Q.displayName="CardContent";let $=n.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)("div",{ref:t,className:u("flex items-center p-6 pt-0",a),...s})});$.displayName="CardFooter";var ee=a(47625),et=a(8147),ea=a(22190);let es={light:"",dark:".dark"},er=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2?arguments[2]:void 0,s=e.toFixed(t);return"ru"===a?s.replace(".",","):s},el=n.createContext(null);function en(){let e=n.useContext(el);if(!e)throw Error("useChart must be used within a <ChartContainer />");return e}let ei=n.forwardRef((e,t)=>{let{id:a,className:s,children:r,config:i,...o}=e,d=n.useId(),c="chart-".concat(a||d.replace(/:/g,""));return(0,l.jsx)(el.Provider,{value:{config:i},children:(0,l.jsxs)("div",{"data-chart":c,ref:t,className:u("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",s),...o,children:[(0,l.jsx)(eo,{id:c,config:i}),(0,l.jsx)(ee.h,{children:r})]})})});ei.displayName="Chart";let eo=e=>{let{id:t,config:a}=e;if(!a||"object"!=typeof a)return null;let s=Object.entries(a).filter(e=>{let[,t]=e;return t.theme||t.color});return s.length?(0,l.jsx)("style",{dangerouslySetInnerHTML:{__html:Object.entries(es).map(e=>{let[a,r]=e;return"\n".concat(r," [data-chart=").concat(t,"] {\n").concat(s.map(e=>{var t;let[s,r]=e,l=(null===(t=r.theme)||void 0===t?void 0:t[a])||r.color;return l?"  --color-".concat(s,": ").concat(l,";"):null}).join("\n"),"\n}\n")}).join("\n")}}):null},ed=et.u,ec=n.forwardRef((e,t)=>{let{active:a,payload:s,className:r,indicator:i="dot",hideLabel:o=!1,hideIndicator:d=!1,label:c,labelFormatter:m,labelClassName:x,formatter:h,color:p,nameKey:g,labelKey:f,formatAsPercentage:b,totalValue:j,decimalScale:v,language:y}=e,{config:N}=en(),w=n.useMemo(()=>{var e;if(o||!(null==s?void 0:s.length))return null;let[t]=s,a="".concat(f||(null==t?void 0:t.dataKey)||(null==t?void 0:t.name)||"value"),r=eh(N,t,a),n=f||"string"!=typeof c?null==r?void 0:r.label:(null===(e=N[c])||void 0===e?void 0:e.label)||c;return m?(0,l.jsx)("div",{className:u("font-medium",x),children:m(n,s)}):n?(0,l.jsx)("div",{className:u("font-medium",x),children:n}):null},[c,m,s,o,x,N,f]);if(!a||!(null==s?void 0:s.length))return null;let k=1===s.length&&"dot"!==i;return(0,l.jsxs)("div",{ref:t,className:u("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",r),children:[k?null:w,(0,l.jsx)("div",{className:"grid gap-1.5",children:s.filter(e=>"none"!==e.type).map((e,t)=>{let a="".concat(g||e.name||e.dataKey||"value"),s=eh(N,e,a),r=p||e.payload.fill||e.color;return(0,l.jsx)("div",{className:u("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground","dot"===i&&"items-center"),children:h&&(null==e?void 0:e.value)!==void 0&&e.name?h(e.value,e.name,e,t,e.payload):(0,l.jsxs)(l.Fragment,{children:[(null==s?void 0:s.icon)?(0,l.jsx)(s.icon,{}):!d&&(0,l.jsx)("div",{className:u("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":"dot"===i,"w-1":"line"===i,"w-0 border-[1.5px] border-dashed bg-transparent":"dashed"===i,"my-0.5":k&&"dashed"===i}),style:{"--color-bg":r,"--color-border":r}}),(0,l.jsxs)("div",{className:u("flex flex-1 justify-between leading-none",k?"items-end":"items-center"),children:[(0,l.jsxs)("div",{className:"grid gap-1.5",children:[k?w:null,(0,l.jsx)("span",{className:"text-muted-foreground",children:(null==s?void 0:s.label)||e.name})]}),e.value&&(0,l.jsx)("span",{className:"font-mono font-medium tabular-nums text-foreground",children:b&&j&&e.value?"".concat(er(Number(e.value)/Number(j)*100,v||1,y),"%"):e.value?Number(e.value).toLocaleString():"0"})]})]})},e.dataKey)})})]})});ec.displayName="ChartTooltip";let em=ea.D,ex=n.forwardRef((e,t)=>{let{className:a,hideIcon:s=!1,payload:r,verticalAlign:n="bottom",nameKey:i}=e,{config:o}=en();return(null==r?void 0:r.length)?(0,l.jsx)("div",{ref:t,className:u("flex items-center justify-center gap-4","top"===n?"pb-3":"pt-3",a),children:r.filter(e=>"none"!==e.type).map(e=>{let t="".concat(i||e.dataKey||"value"),a=eh(o,e,t);return(0,l.jsxs)("div",{className:u("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[(null==a?void 0:a.icon)&&!s?(0,l.jsx)(a.icon,{}):(0,l.jsx)("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:e.color}}),null==a?void 0:a.label]},e.value)})}):null});function eh(e,t,a){if("object"!=typeof t||null===t)return;let s="payload"in t&&"object"==typeof t.payload&&null!==t.payload?t.payload:void 0,r=a;return a in t&&"string"==typeof t[a]?r=t[a]:s&&a in s&&"string"==typeof s[a]&&(r=s[a]),r in e?e[r]:e[a]}function eu(e){let{className:t,...a}=e;return(0,l.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,l.jsx)("table",{"data-slot":"table",className:u("w-full caption-bottom text-sm",t),...a})})}function ep(e){let{className:t,...a}=e;return(0,l.jsx)("thead",{"data-slot":"table-header",className:u("[&_tr]:border-b",t),...a})}function eg(e){let{className:t,...a}=e;return(0,l.jsx)("tbody",{"data-slot":"table-body",className:u("[&_tr:last-child]:border-0",t),...a})}function ef(e){let{className:t,...a}=e;return(0,l.jsx)("tr",{"data-slot":"table-row",className:u("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",t),...a})}function eb(e){let{className:t,...a}=e;return(0,l.jsx)("th",{"data-slot":"table-head",className:u("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...a})}function ej(e){let{className:t,...a}=e;return(0,l.jsx)("td",{"data-slot":"table-cell",className:u("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...a})}ex.displayName="ChartLegend";var ev=a(70001),ey=a(32489);function eN(e){let{...t}=e;return(0,l.jsx)(ev.fC,{"data-slot":"dialog",...t})}function ew(e){let{...t}=e;return(0,l.jsx)(ev.h_,{"data-slot":"dialog-portal",...t})}let ek=n.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)(ev.aV,{ref:t,"data-slot":"dialog-overlay",className:u("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...s})});ek.displayName=ev.aV.displayName;let eC=n.forwardRef((e,t)=>{let{className:a,children:s,...r}=e;return(0,l.jsxs)(ew,{"data-slot":"dialog-portal",children:[(0,l.jsx)(ek,{}),(0,l.jsxs)(ev.VY,{ref:t,"data-slot":"dialog-content",className:u("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",a),...r,children:[s,(0,l.jsxs)(ev.x8,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,l.jsx)(ey.Z,{}),(0,l.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});function eS(e){let{className:t,...a}=e;return(0,l.jsx)("div",{"data-slot":"dialog-header",className:u("flex flex-col gap-2 text-center sm:text-left",t),...a})}function eP(e){let{className:t,...a}=e;return(0,l.jsx)("div",{"data-slot":"dialog-footer",className:u("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...a})}function eA(e){let{className:t,...a}=e;return(0,l.jsx)(ev.Dx,{"data-slot":"dialog-title",className:u("text-lg leading-none font-semibold",t),...a})}function eR(e){let{className:t,...a}=e;return(0,l.jsx)(ev.dk,{"data-slot":"dialog-description",className:u("text-muted-foreground text-sm",t),...a})}eC.displayName=ev.VY.displayName;var eE=a(73247);function eM(e){let{open:t,onOpenChange:a,onSelectStock:s}=e,[i,o]=(0,n.useState)(""),[d,c]=(0,n.useState)(null),[m,x]=(0,n.useState)([]),[h,u]=(0,n.useState)(!1),[p,f]=(0,n.useState)(null);(0,n.useEffect)(()=>{t&&b()},[t]);let b=async()=>{u(!0),f(null);try{let e=q.getAPI(r.MOEX),t=(await e.searchStocks("")).filter(e=>e.ticker&&e.name);x(t)}catch(e){console.error("Error fetching stocks:",e),f(e instanceof Error?e.message:"Failed to fetch stocks")}finally{u(!1)}},j=m.filter(e=>e.ticker.toLowerCase().includes(i.toLowerCase())||e.name.toLowerCase().includes(i.toLowerCase()));return(0,n.useEffect)(()=>{c(null)},[i]),(0,l.jsx)(eN,{open:t,onOpenChange:a,children:(0,l.jsxs)(eC,{className:"max-w-4xl max-h-[80vh] flex flex-col",children:[(0,l.jsxs)(eS,{children:[(0,l.jsx)(eA,{children:"Select Stock"}),(0,l.jsx)(eR,{children:"Search and select a stock from the list below"})]}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(eE.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,l.jsx)(D,{placeholder:"Search by ticker or name...",value:i,onChange:e=>o(e.target.value),className:"pl-10"})]}),(0,l.jsx)("div",{className:"border rounded-lg overflow-hidden h-[400px] flex flex-col",children:(0,l.jsx)("div",{className:"overflow-auto flex-1",children:(0,l.jsxs)(eu,{children:[(0,l.jsx)(ep,{className:"sticky top-0 bg-white z-10",children:(0,l.jsxs)(ef,{children:[(0,l.jsx)(eb,{children:"Ticker"}),(0,l.jsx)(eb,{children:"Name"})]})}),(0,l.jsx)(eg,{children:j.map(e=>(0,l.jsxs)(ef,{className:"cursor-pointer ".concat((null==d?void 0:d.ticker)===e.ticker?"bg-blue-50":""),onClick:()=>c(e),children:[(0,l.jsx)(ej,{children:e.ticker}),(0,l.jsx)(ej,{children:e.name})]},e.ticker))})]})})}),(0,l.jsxs)(eP,{children:[(0,l.jsx)(g,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),(0,l.jsx)(g,{onClick:()=>{d&&(s(d),a(!1),c(null),o(""))},disabled:!d,children:"Choose Stock"})]})]})})}function ez(e){let{onNavigate:t}=e,[a,s]=(0,n.useState)([]),{t:i,currentLanguage:o,changeLanguage:c}=(0,d.Z)(),m="[&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none [&::-webkit-search-cancel-button]:appearance-none [&::-webkit-search-decoration]:appearance-none",[x,h]=(0,n.useState)(""),[u,p]=(0,n.useState)([{id:1,stock:"",price:"",weight:"",lotSize:"",lots:"",sum:""}]),[f,b]=(0,n.useState)(!1),[j,v]=(0,n.useState)(null),[C,S]=(0,n.useState)(null),A=n.useMemo(()=>{let e=u.filter(e=>""!==e.stock.trim()).length,t=u.reduce((e,t)=>e+(parseFloat(t.weight)||0),0),a=u.reduce((e,t)=>e+(parseFloat(t.sum)||0),0);return{stocks:e,weight:.1>Math.abs(t-100)?"100":t.toFixed(2),weightRaw:t,sum:a}},[u]),[T,Y]=(0,n.useState)(null),X=n.useMemo(()=>T?[...u].sort((e,t)=>{let a=e[T.key],s=t[T.key];return(("price"===T.key||"weight"===T.key||"lotSize"===T.key||"lots"===T.key||"sum"===T.key)&&(a=parseFloat(a)||0,s=parseFloat(s)||0),""===a&&""!==s)?"asc"===T.direction?-1:1:""===s&&""!==a?"asc"===T.direction?1:-1:""===a&&""===s?0:a<s?"asc"===T.direction?-1:1:a>s?"asc"===T.direction?1:-1:0}):u,[u,T]),U=e=>{Y(t=>t&&t.key===e?"asc"===t.direction?{key:e,direction:"desc"}:null:{key:e,direction:"asc"})},ee=e=>T&&T.key===e?"asc"===T.direction?(0,l.jsx)(E.Z,{className:"ml-2 h-4 w-4"}):(0,l.jsx)(M.Z,{className:"ml-2 h-4 w-4"}):(0,l.jsx)(R.Z,{className:"ml-2 h-4 w-4 text-gray-400 opacity-60"}),et=()=>{p(e=>e.map(e=>({...e,lots:"",sum:""}))),S(null),s([])},ea=e=>{u.length>1&&p(u.filter(t=>t.id!==e))},es=(e,t,a)=>{s([]),p(s=>s.map(s=>s.id===e?{...s,[t]:a}:s))},er=async(e,t,a)=>{try{et();let s=u.find(t=>t.id===e);if(!s)return;let l=q.getAPI(r.MOEX),n=await l.fetchLastPrice(a),i=s.price;null!==n&&(i=n.toString()),p(a=>a.map(a=>a.id===e?{...a,[t]:i}:a))}catch(e){console.info("Couldn't find the last price for the stock",e)}},el=async()=>{try{let e=q.getAPI(r.MOEX),t=await e.fetchIndexComponents();p([]),S(null),s([]);let a=t.sort((e,t)=>t.weight-e.weight),l=a.map(e=>e.ticker),n=await e.searchStocks(void 0,l),i=new Map(n.map(e=>[e.ticker,e])),o=a.map((e,t)=>{var a;let s=i.get(e.ticker);return{id:t+1,stock:e.ticker,price:"",weight:e.weight.toString(),lotSize:(null==s?void 0:null===(a=s.lotSize)||void 0===a?void 0:a.toString())||"",lots:"",sum:""}});for(let e of(p(o),o))await en(e.id,"price",e.stock)}catch(e){console.error("Error fetching IMOEX index:",e)}},en=async(e,t,a)=>{try{let s=q.getAPI(r.MOEX),l=await s.fetchLastPrice(a);null!==l&&p(a=>a.map(a=>a.id===e?{...a,[t]:l.toString()}:a))}catch(e){console.info("Couldn't find the last price for stock ".concat(a),e)}},eo=e=>{v(e),b(!0)};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("header",{className:"bg-white border-b border-gray-200",children:(0,l.jsx)("div",{className:"container mx-auto px-2 md:px-6 py-4 md:py-6",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3 md:gap-4",children:[(0,l.jsx)(g,{variant:"ghost",onClick:()=>t("home"),className:"h-9 w-9 md:h-10 md:w-10 p-0",children:(0,l.jsx)(I.Z,{className:"h-4 w-4 md:h-5 md:w-5"})}),(0,l.jsx)("h1",{className:"text-lg md:text-2xl",children:i("portfolioAllocation.header")})]}),(0,l.jsx)(P,{})]})})}),(0,l.jsxs)("main",{className:"container mx-auto px-2 md:px-6 py-4 md:py-8",children:[(0,l.jsx)("div",{className:"bg-white md:rounded-lg md:border md:border-gray-200 p-3 md:p-6 mb-4 md:mb-6",children:(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-end gap-3 md:gap-4",children:[(0,l.jsxs)("div",{className:"flex-1 max-w-md",children:[(0,l.jsx)(B,{htmlFor:"investment",className:"text-sm md:text-base",children:i("portfolioAllocation.investmentLabel")}),(0,l.jsx)(W,{value:x,onValueChange:e=>h(e||""),placeholder:i("common.enterAmount"),className:"text-sm md:text-base flex p-2 h-10 md:h-10 w-full rounded-md border border-1S border-gray-300 mt-2 "+m})]}),(0,l.jsx)(g,{onClick:()=>{let e=parseFloat(x),t=[],a=u.map(e=>({...e,priceNum:e.price?parseFloat(e.price):NaN,weightNum:e.weight?parseFloat(e.weight):NaN,lotSizeNum:e.lotSize?parseFloat(e.lotSize):NaN})),r=a.filter(e=>!e.stock||isNaN(e.priceNum)||e.priceNum<=0||isNaN(e.weightNum)||e.weightNum<=0||isNaN(e.lotSizeNum)||e.lotSizeNum<=0);isNaN(e)&&t.push(i("validation.investmentRequired")),r.length>0&&t.push(i("validation.incompleteFields"));let l=0;for(let e of a)l=Math.round((l+e.weightNum)*100)/100;if(l>100.09&&t.push(i("validation.weightExceeds")),t.length>0){s(t);return}if(s([]),0===u.length)return;let n=a.filter(e=>!isNaN(e.weightNum)&&!isNaN(e.priceNum)&&!isNaN(e.lotSizeNum)&&e.weightNum>0);if(0===n.length)return;let o=n.map(e=>e.weightNum),d=n.map(e=>e.priceNum),c=n.map(e=>e.lotSizeNum),m=n.map(e=>e.id),h=o.reduce((e,t)=>e+t,0),g=o.map(e=>e/h),f=[],b=[];for(let t=0;t<n.length;t++)f.push(e*g[t]),b.push(f[t]/(d[t]*c[t]));let j=[];for(let e=0;e<n.length;e++)j.push(Math.floor(b[e]));let v=0;for(let e=0;e<n.length;e++)v+=j[e]*c[e]*d[e];let y=e-v,N=[];for(let e=0;e<n.length;e++){let t=j[e]*c[e]*d[e],a=v>0?t/v:0,s=g[e]-a,r=c[e]*d[e];N.push({index:e,deviation:s,cost:r})}for(let e of(N.sort((e,t)=>t.deviation-e.deviation),N)){let t=e.index;y>=e.cost&&(j[t]+=1,y-=e.cost)}let w=new Map;for(let e=0;e<n.length;e++){let t=j[e],a=d[e]*c[e]*t;w.set(m[e],{lots:t.toString(),sum:a.toFixed(2)})}let k=Array.from(w.values()).reduce((e,t)=>e+parseFloat(t.sum),0);S({totalBudget:e,totalInvested:k,remaining:e-k,utilization:k/e*100}),p(e=>e.map(e=>{if(w.has(e.id)){let{lots:t,sum:a}=w.get(e.id);return{...e,lots:t,sum:a}}return{...e,lots:"",sum:""}}))},className:"h-10 text-sm md:text-base md:h-11 px-3 md:px-8 border-2 border-gray-600  ",children:i("common.calculate")})]})}),a.length>0&&(0,l.jsxs)("div",{className:"bg-rose-50/30 md:rounded-lg md:border md:border-rose-200 p-3 md:p-6 mb-4 md:mb-6",children:[(0,l.jsx)("h3",{className:"text-sm md:text-base font-medium text-rose-800 mb-2",children:i("common.warning")}),(0,l.jsx)("div",{className:"text-sm md:text-base text-rose-700",children:(0,l.jsx)("ul",{className:"list-none space-y-1",children:a.map((e,t)=>(0,l.jsxs)("li",{children:["• ",e]},t))})})]}),C&&(0,l.jsxs)("div",{className:"bg-white md:rounded-lg md:border md:border-gray-200 p-3 md:p-6 mb-4 md:mb-6",children:[(0,l.jsx)("h3",{className:"text-sm md:text-base font-semibold mb-4 text-gray-800",children:i("allocationSummary.header")}),(0,l.jsx)("div",{className:"border rounded-lg overflow-hidden",children:(0,l.jsx)(eu,{children:(0,l.jsxs)(eg,{children:[(0,l.jsxs)(ef,{className:"hover:bg-transparent",children:[(0,l.jsx)(ej,{className:"py-3 px-4 text-sm text-gray-500 border-r border-gray-200 w-[250px]",children:i("allocationSummary.totalBudget")}),(0,l.jsx)(ej,{className:"py-3 px-4 text-sm text-gray-900 text-start",children:(0,l.jsx)(W,{value:C.totalBudget.toString(),onValueChange:()=>{},placeholder:"",readOnly:!0,decimalsLimit:0,decimalScale:2,className:"bg-white"})})]}),(0,l.jsxs)(ef,{className:"hover:bg-transparent",children:[(0,l.jsx)(ej,{className:"py-3 px-4 text-sm text-gray-500 border-r border-gray-200 w-[140px]",children:i("allocationSummary.totalInvested")}),(0,l.jsx)(ej,{className:"py-3 px-4 text-sm text-gray-900",children:(0,l.jsx)(W,{value:C.totalInvested.toString(),onValueChange:()=>{},placeholder:"",readOnly:!0,decimalsLimit:0,decimalScale:2,className:"bg-white"})})]}),(0,l.jsxs)(ef,{className:"hover:bg-transparent",children:[(0,l.jsx)(ej,{className:"py-3 px-4 text-sm text-gray-500 border-r border-gray-200 w-[140px]",children:i("allocationSummary.remaining")}),(0,l.jsx)(ej,{className:"py-3 px-4 text-sm text-gray-900",children:(0,l.jsx)(W,{value:C.remaining.toString(),onValueChange:()=>{},placeholder:"",readOnly:!0,decimalsLimit:0,decimalScale:2,className:"bg-white"})})]})]})})}),(0,l.jsx)("div",{className:"bg-white md:rounded-lg pt-3 md:p-0 mt-3 mb-4 md:mb-6",children:(0,l.jsx)(()=>{let[e,t]=n.useState(void 0),a=n.useMemo(()=>{let e=u.filter(e=>""!==e.stock.trim()&&e.weight&&parseFloat(e.weight)>0).sort((e,t)=>parseFloat(t.weight)-parseFloat(e.weight));if(0===e.length)return[];let t=e.slice(0,8),a=e.slice(8).reduce((e,t)=>e+parseFloat(t.weight),0),s=["hsl(210, 90%, 20%)","hsl(210, 85%, 30%)","hsl(210, 80%, 40%)","hsl(210, 75%, 50%)","hsl(210, 70%, 60%)","hsl(210, 65%, 70%)","hsl(210, 60%, 80%)","hsl(210, 55%, 85%)","hsl(210, 50%, 90%)"],r=t.map((e,t)=>({name:e.stock,value:parseFloat(e.weight),fill:s[t]}));return a>0&&r.push({name:i("common.other"),value:a,fill:"hsl(210, 50%, 90%)"}),r},[u]),s=n.useMemo(()=>a.reduce((e,t)=>e+t.value,0),[a]),r=n.useMemo(()=>{let e={value:{label:"Weight"}};return a.forEach(t=>{e[t.name]={label:t.name,color:t.fill}}),e},[a]);if(0===a.length)return(0,l.jsx)(K,{className:"flex flex-col",children:(0,l.jsx)(J,{className:"items-center pb-0",children:(0,l.jsx)(G,{children:i("portfolioAllocation.portfolioDistributionByWeight")})})});let d=u.filter(e=>""!==e.stock.trim()).length;return(0,l.jsxs)(K,{className:"flex flex-col",children:[(0,l.jsx)(J,{className:"items-center pb-0",children:(0,l.jsxs)(G,{children:[i("portfolioAllocation.portfolioDistributionByWeight"),", %"]})}),(0,l.jsx)(Q,{className:"flex-1 pb-0",children:(0,l.jsx)(ei,{config:r,className:"mx-auto aspect-square max-h-[350px]",children:(0,l.jsxs)(Z.u,{children:[(0,l.jsx)(ed,{cursor:!1,content:(0,l.jsx)(ec,{hideLabel:!0,formatAsPercentage:!0,totalValue:s,decimalScale:1,language:o})}),(0,l.jsx)(_.b,{data:a,dataKey:"value",nameKey:"name",innerRadius:35,strokeWidth:5,activeIndex:e,onMouseEnter:(e,a)=>{t(a)},onMouseLeave:()=>{t(void 0)},activeShape:e=>{let{outerRadius:t=0,...a}=e;return(0,l.jsx)(V.L,{...a,outerRadius:t+5})}}),(0,l.jsx)(em,{content:(0,l.jsx)(ex,{nameKey:"name"}),className:"-translate-y-2 flex-wrap gap-2 *:basis-1/4 *:justify-center *:text-xs"})]})})}),(0,l.jsx)($,{className:"flex-col gap-2 text-sm",children:(0,l.jsxs)("div",{className:"flex items-center gap-2 leading-none font-medium",children:[(0,l.jsx)(z.Z,{className:"h-4 w-4"}),i("portfolioAllocation.totalStocks"),": ",d]})})]})},{})})]}),(0,l.jsxs)("div",{className:"bg-white md:rounded-lg md:border md:border-gray-200 p-3 md:p-6 mb-4 md:mb-6",children:[(0,l.jsx)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 mb-3 md:mb-4",children:(0,l.jsx)("h2",{className:"text-sm md:text-base font-semibold",children:i("portfolioAllocation.portfolioHeader")})}),(0,l.jsx)("div",{className:"md:border md:rounded-lg mb-3",children:(0,l.jsxs)(eu,{children:[(0,l.jsx)(ep,{children:(0,l.jsxs)(ef,{children:[(0,l.jsx)(eb,{className:"w-auto px-0.5 md:px-4 py-2 md:py-3 text-sm bg-white",children:(0,l.jsxs)(g,{variant:"ghost",onClick:()=>U("stock"),className:"p-0 hover:bg-transparent",children:[i("portfolioAllocation.stockHeader"),ee("stock")]})}),(0,l.jsx)(eb,{className:"w-[120px] md:w-auto px-0.5 md:px-4 py-2 md:py-3 text-sm bg-white",children:(0,l.jsxs)(g,{variant:"ghost",onClick:()=>U("price"),className:"p-0 hover:bg-transparent",children:[i("portfolioAllocation.priceHeader"),ee("price")]})}),(0,l.jsx)(eb,{className:"w-[85px] md:w-[85px] px-0.5 md:px-4 py-2 md:py-3 text-sm bg-white",children:(0,l.jsxs)(g,{variant:"ghost",onClick:()=>U("weight"),className:"p-0 hover:bg-transparent",children:[i("portfolioAllocation.weightHeader"),ee("weight")]})}),(0,l.jsx)(eb,{className:"hidden md:table-cell md:w-[80px] bg-white",children:(0,l.jsxs)(g,{variant:"ghost",onClick:()=>U("lotSize"),className:"p-0 hover:bg-transparent",children:[i("portfolioAllocation.lotSizeHeader"),ee("lotSize")]})}),(0,l.jsx)(eb,{className:"hidden md:table-cell md:w-[100px] bg-white text-right",children:(0,l.jsxs)(g,{variant:"ghost",onClick:()=>U("lots"),className:"p-0 hover:bg-transparent text-right w-full justify-end",children:[i("portfolioAllocation.lotsHeader"),ee("lots")]})}),(0,l.jsx)(eb,{className:"hidden md:table-cell md:w-[100px] bg-white text-right",children:(0,l.jsxs)(g,{variant:"ghost",onClick:()=>U("sum"),className:"p-0 hover:bg-transparent text-right w-full justify-end",children:[i("portfolioAllocation.sumHeader"),ee("sum")]})}),(0,l.jsx)(eb,{className:"w-[40px] md:w-[50px] px-0.5 md:px-4 bg-white"})]})}),(0,l.jsxs)(eg,{className:"",children:[X.map(e=>(0,l.jsxs)(n.Fragment,{children:[(0,l.jsxs)(ef,{className:"hover:bg-transparent",children:[(0,l.jsx)(ej,{className:"px-0.5 md:px-4 py-1.5 md:py-4",children:(0,l.jsxs)("div",{className:"flex gap-0.5 md:gap-2",children:[(0,l.jsx)(D,{value:e.stock,onChange:t=>es(e.id,"stock",t.target.value),placeholder:"",className:"bg-white border-gray-200 h-8 md:h-10 text-sm md:text-sm px-1.5 md:px-3 shadow-none"}),(0,l.jsx)(g,{variant:"outline",size:"sm",onClick:()=>eo(e.id),className:"h-8 w-8 md:h-10 md:w-10 p-0 shrink-0 border-0 md:border",children:(0,l.jsx)(F.Z,{className:"h-3.5 w-3.5 md:h-4 md:w-4"})})]})}),(0,l.jsx)(ej,{className:"px-0.5 md:px-4 py-1.5 md:py-4",children:(0,l.jsx)(W,{value:e.price||"",onValueChange:t=>es(e.id,"price",t||void 0),placeholder:"",className:"bg-white border rounded-md border-gray-200 w-full h-8 md:h-10 text-sm md:text-sm px-2 md:px-3"+m})}),(0,l.jsx)(ej,{className:"px-0.5 md:px-4 py-1.5 md:py-4",children:(0,l.jsx)(W,{value:e.weight,onValueChange:t=>{let a=t?parseFloat(t):0;(""===t||a<=100)&&es(e.id,"weight",t||"")},placeholder:"",className:"bg-white border rounded-md border-gray-200 w-full h-8 md:h-10 text-sm md:text-sm px-2 md:px-3"})}),(0,l.jsx)(ej,{className:"hidden md:table-cell",children:(0,l.jsx)(W,{value:e.lotSize,onValueChange:()=>{},placeholder:"",readOnly:!0,decimalsLimit:0,decimalScale:0,className:"bg-white border rounded-md border-gray-200 w-full h-8 md:h-10 text-sm md:text-sm px-2 md:px-3"})}),(0,l.jsx)(ej,{className:"hidden md:table-cell text-right",children:(0,l.jsx)(W,{value:e.lots,onValueChange:()=>{},placeholder:"",readOnly:!0,decimalsLimit:0,decimalScale:0,className:"bg-white text-sm md:text-sm border-0 text-right"})}),(0,l.jsx)(ej,{className:"hidden md:table-cell text-right",children:(0,l.jsx)(W,{value:e.sum,onValueChange:()=>{},placeholder:"",readOnly:!0,className:"bg-white border-0 text-sm md:text-sm text-right"})}),(0,l.jsx)(ej,{className:"px-0.5 md:px-4 py-1.5 md:py-4",children:(0,l.jsx)(g,{variant:"ghost",size:"sm",onClick:()=>ea(e.id),disabled:1===u.length,className:"h-8 w-8 md:h-10 md:w-10 p-0 shrink-0",children:(0,l.jsx)(O.Z,{className:"h-3.5 w-3.5 md:h-4 md:w-4 text-red-500"})})})]}),(0,l.jsx)(ef,{className:"md:hidden hover:bg-transparent border-t-0",children:(0,l.jsx)(ej,{colSpan:7,className:"px-1 pt-1 pb-2",children:(0,l.jsxs)("div",{className:"text-xs md:text-sm text-gray-500 space-y-0.5",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsxs)("span",{children:[i("portfolioAllocation.lotsHeader"),":"]}),(0,l.jsx)(W,{value:e.lots,onValueChange:()=>{},readOnly:!0,decimalsLimit:0,decimalScale:0,className:"text-gray-700 bg-transparent border-0 p-0 text-xs md:text-sm h-auto"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsxs)("span",{children:[i("portfolioAllocation.sumHeader"),":"]}),(0,l.jsx)(W,{value:e.sum,onValueChange:()=>{},readOnly:!0,className:"text-gray-700 bg-transparent border-0 text-xs md:text-sm h-auto"})]})]})})},"".concat(e.id,"-mobile"))]},e.id)),(0,l.jsxs)(ef,{className:"bg-gray-50 font-semibold border-t-0 border-gray-300",children:[(0,l.jsx)(ej,{className:"px-0.5 md:px-4 py-1.5 md:py-4 hidden md:table-cell",children:(0,l.jsxs)("div",{className:"text-sm md:text-sm px-1.5 md:px-3",children:[i("portfolioAllocation.totalStocks"),":"," ",A.stocks]})}),(0,l.jsx)(ej,{className:"px-0.5 md:px-4 py-2 md:py-4 hidden md:table-cell"}),(0,l.jsx)(ej,{className:"px-0.5 md:px-4 py-1.5 md:py-4 hidden md:table-cell",children:(0,l.jsx)("div",{className:"text-sm md:text-sm px-2 md:px-3",children:(0,l.jsx)(W,{value:A.weight.toString(),onValueChange:()=>{},placeholder:"",suffix:"%",readOnly:!0,className:"bg-transparent border-0 text-sm md:text-sm font-semibold"})})}),(0,l.jsx)(ej,{className:"hidden md:table-cell px-2 md:px-4 py-2 md:py-4"}),(0,l.jsx)(ej,{className:"hidden md:table-cell text-right px-2 md:px-4 py-2 md:py-4"}),(0,l.jsx)(ej,{className:"hidden md:table-cell text-right",children:(0,l.jsx)(W,{value:A.sum.toString(),onValueChange:()=>{},placeholder:"",readOnly:!0,className:"bg-transparent border-0 text-sm md:text-sm text-right font-semibold"})}),(0,l.jsx)(ej,{className:"px-0.5 md:px-4 py-2 md:py-4 hidden md:table-cell"}),(0,l.jsx)(ej,{className:"px-0 py-2 md:hidden",colSpan:7,children:(0,l.jsxs)("div",{className:"text-xs md:text-sm text-gray-700 font-semibold space-y-1 pl-2",children:[(0,l.jsxs)("div",{className:"items-center gap-",children:[(0,l.jsxs)("span",{className:"min-w-[80px]",children:[i("portfolioAllocation.totalStocks"),":"]}),(0,l.jsx)("span",{className:"pl-2",children:A.stocks})]}),(0,l.jsxs)("div",{className:"items-center gap-1",children:[(0,l.jsxs)("span",{className:"min-w-[80px]",children:[i("portfolioAllocation.totalWeight"),":"]}),(0,l.jsxs)("span",{className:"pl-2",children:[A.weight,"%"]})]}),(0,l.jsxs)("div",{className:"items-center gap-2",children:[(0,l.jsxs)("span",{className:"min-w-[80px]",children:[i("portfolioAllocation.totalSum"),":"]}),(0,l.jsx)(W,{value:A.sum.toString(),onValueChange:()=>{},readOnly:!0,className:"pl-2 text-gray-700 bg-transparent border-0 text-xs md:text-sm h-auto font-semibold"})]})]})})]})]})]})}),(0,l.jsx)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:(0,l.jsxs)("div",{className:"text-sm md:text-base flex items-center gap-2 flex-wrap",children:[(0,l.jsxs)(g,{onClick:()=>{s([]),p(e=>[...e.map(e=>({...e,lots:"",sum:""})),{id:Date.now(),stock:"",price:"",weight:"",lotSize:"",lots:"",sum:""}]),S(null)},variant:"outline",size:"sm",className:"h-9",children:[(0,l.jsx)(H.Z,{className:"h-4 w-4 mr-2"}),i("portfolioAllocation.addRow")]}),(0,l.jsxs)(y,{children:[(0,l.jsx)(N,{asChild:!0,children:(0,l.jsxs)(g,{variant:"ghost",size:"sm",className:"text-gray-600 h-9",children:[i("portfolioAllocation.additionalCommands"),(0,l.jsx)(L.Z,{className:"h-4 w-4 ml-1"})]})}),(0,l.jsxs)(w,{align:"end",children:[(0,l.jsx)(k,{onClick:()=>{p(e=>{if(0===e.length)return e;let t=Array(e.length).fill(0),a=100/e.length;for(let s=0;s<e.length;s++)t[s]=Math.floor(100*a)/100;let s=t.reduce((e,t)=>e+t,0);return t[t.length-1]+=100-s,e.map((e,a)=>({...e,weight:t[a].toFixed(2)}))})},children:i("portfolioAllocation.distributeWeightsEvenly")}),(0,l.jsx)(k,{onClick:el,children:i("portfolioAllocation.copyIndexIMOEX")})]})]})]})})]})]}),(0,l.jsx)(eM,{open:f,onOpenChange:b,onSelectStock:e=>{null!==j&&(es(j,"stock",e.ticker),es(j,"lotSize",e.lotSize),er(j,"price",e.ticker))}})]})}var eI=a(71027);function eF(e){let{className:t,...a}=e;return(0,l.jsx)(eI.fC,{"data-slot":"checkbox",className:u("peer border bg-input-background dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...a,children:(0,l.jsx)(eI.z$,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:(0,l.jsx)(j.Z,{className:"size-3.5"})})})}var eO=a(24156),eH=a(962);function eL(e){let{...t}=e;return(0,l.jsx)(eH.fC,{"data-slot":"collapsible",...t})}function eZ(e){let{...t}=e;return(0,l.jsx)(eH.wy,{"data-slot":"collapsible-trigger",...t})}function e_(e){let{...t}=e;return(0,l.jsx)(eH.Fw,{"data-slot":"collapsible-content",...t})}function eV(e){let{onNavigate:t}=e,{t:a}=(0,d.Z)(),[s,r]=(0,n.useState)(""),[i,o]=(0,n.useState)(""),[c,m]=(0,n.useState)("years"),[x,h]=(0,n.useState)(""),[u,p]=(0,n.useState)(!0),[f,b]=(0,n.useState)(""),[j,v]=(0,n.useState)("each year"),[y,N]=(0,n.useState)(!1),[w,k]=(0,n.useState)(""),[C,S]=(0,n.useState)([]);(0,n.useEffect)(()=>{y||R()},[i,f,w,y,c,j]);let A=(e,t)=>{let a=[...C];a[e].amount=t,S(a)},R=()=>{if(0>=parseInt(i)||y)return;let e=parseFloat(w)/100||0,t=parseFloat(f)||0,a=parseInt(i);S(Array.from({length:"each year"===j?"years"===c?a:Math.ceil(a/12):"years"===c?12*a:a},(a,s)=>"each year"===j?{amount:(t*Math.pow(1+e,s)).toFixed(2)}:{amount:(t*Math.pow(1+e,Math.floor(s/12))).toFixed(2)}))},E=e=>{S(C.filter((t,a)=>a!==e))},M=e=>["January","February","March","April","May","June","July","August","September","October","November","December"][e%12],[z,L]=(0,n.useState)(null),Z=()=>{var e,t,a;let r=parseFloat(s)||0,l=parseFloat(x)/100||0,n=parseInt(i)||0,o="months"===c,d=o?n:12*n,m=d/12,h=0,p=[];if("each month"===j){h=r*(1+l*m);for(let t=0;t<d;t++)t<C.length&&(h+=(parseFloat(null===(e=C[t])||void 0===e?void 0:e.amount)||0)*(1+(d-t)/12*l));for(let e=1;e<=Math.ceil(m);e++){let a=Math.min(12*e,d),s=r*(1+a/12*l);for(let e=0;e<a;e++)e<C.length&&(s+=(parseFloat(null===(t=C[e])||void 0===t?void 0:t.amount)||0)*(1+Math.min(d-e-1,a-e-1)/12*l));p.push({period:e,label:"Year ".concat(e),balance:s})}}else{let e=o?Math.ceil(n/12):n,t=r;for(let s=1;s<=e;s++)u&&(t*=1+l),s-1<C.length&&(t+=parseFloat(null===(a=C[s-1])||void 0===a?void 0:a.amount)||0),p.push({period:s,label:"Year ".concat(s),balance:t});h=t}return{finalBalance:h,breakdown:p}};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("header",{className:"bg-white border-b border-gray-200",children:(0,l.jsx)("div",{className:"container mx-auto px-2 md:px-6 py-4 md:py-6",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3 md:gap-4",children:[(0,l.jsx)(g,{variant:"ghost",onClick:()=>t("home"),className:"h-9 w-9 md:h-10 md:w-10 p-0",children:(0,l.jsx)(I.Z,{className:"h-4 w-4 md:h-5 md:w-5"})}),(0,l.jsx)("h1",{className:"text-lg md:text-2xl",children:a("indexCalculatorPage.header")})]}),(0,l.jsx)(P,{})]})})}),(0,l.jsx)("main",{className:"container mx-auto px-6 py-8",children:(0,l.jsxs)("div",{className:"max-w-xl mx-auto bg-white rounded-lg border border-gray-200 p-6",children:[(0,l.jsxs)("div",{className:"mb-3",children:[(0,l.jsx)(B,{htmlFor:"initial-investment",className:"text-sm md:text-sm font-medium text-gray-500 mb-2 block",children:a("indexCalculatorPage.initialInvestment")}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(W,{value:s,onValueChange:e=>r(e||""),placeholder:"",prefix:"",className:"max-w-[185px] text-sm md:text-sm flex p-2 h-10 md:h-10 w-full rounded-md border border-gray-300 focus:ring-2 focus:ring-gray-400 focus:border-gray-400"}),(0,l.jsxs)("select",{className:"w-24 px-3 border border-gray-300 rounded-md text-sm md:text-sm focus:outline-none focus:ring-2 focus:ring-gray-400 focus:border-gray-400",children:[(0,l.jsx)("option",{children:"RUB"}),(0,l.jsx)("option",{children:"USD"}),(0,l.jsx)("option",{children:"EUR"}),(0,l.jsx)("option",{children:"GBP"})]})]})]}),(0,l.jsxs)("div",{className:"mb-3",children:[(0,l.jsx)(B,{htmlFor:"duration",className:"text-sm font-medium text-gray-500 mb-2 block ",children:a("indexCalculatorPage.duration")}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(D,{type:"number",value:i,onChange:e=>{let t=e.target.value;(""===t||/^\d+$/.test(t))&&o(t)},placeholder:"",className:"text-sm md:text-sm flex p-2 h-10 md:h-10 w-full rounded-md border border-gray-300 focus:ring-2 focus:ring-gray-400 focus:border-gray-400 max-w-[80px]",step:"1",min:"0"}),(0,l.jsxs)("select",{value:c,onChange:e=>m(e.target.value),className:"w-28 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-gray-400 focus:border-gray-400",children:[(0,l.jsx)("option",{value:"years",children:a("indexCalculatorPage.years")}),(0,l.jsx)("option",{value:"months",children:a("indexCalculatorPage.months")})]})]})]}),(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsx)(B,{htmlFor:"interest-rate",className:"text-sm font-medium text-gray-500 mb-2 block",children:a("indexCalculatorPage.interestRate")}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(W,{value:x,onValueChange:e=>h(e||""),placeholder:"",prefix:"",className:"text-sm md:text-sm flex p-2 h-10 md:h-10 w-full rounded-md border border-gray-300 focus:ring-2 focus:ring-gray-400 focus:border-gray-400 max-w-[80px] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none [&::-webkit-search-cancel-button]:appearance-none [&::-webkit-search-decoration]:appearance-none"}),(0,l.jsx)("div",{className:"w-32 px-0 py-2 border-0 rounded-md text-sm bg-white text-gray-500",children:a("indexCalculatorPage.perYear")})]})]}),(0,l.jsx)("div",{className:"mb-6",children:(0,l.jsx)("div",{children:(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(eF,{id:"reinvest",onCheckedChange:e=>p(e)}),(0,l.jsx)(B,{className:"text-gray-500",htmlFor:"terms",children:a("indexCalculatorPage.reinvest")})]})})}),(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsx)(B,{htmlFor:"additional-investment",className:"text-sm font-medium text-gray-500 mb-2 block",children:a("indexCalculatorPage.additionalInvestment")}),(0,l.jsxs)("div",{className:"flex gap-2 mb-4",children:[(0,l.jsx)(W,{value:f,onValueChange:e=>b(e||""),placeholder:"",prefix:"",readOnly:y,className:"max-w-[185px] text-sm  flex p-2 h-10 md:h-10 w-full rounded-md border border-gray-300 focus:ring-2 focus:ring-gray-400 focus:border-gray-400 ".concat(y?"bg-gray-100 cursor-not-allowed":"")}),(0,l.jsxs)("select",{value:j,onChange:e=>v(e.target.value),disabled:y,className:"w-32 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-gray-400 focus:border-gray-400 ".concat(y?"bg-gray-100 cursor-not-allowed":""),children:[(0,l.jsx)("option",{value:"each year",children:a("indexCalculatorPage.eachYear")}),(0,l.jsx)("option",{value:"each month",children:a("indexCalculatorPage.eachMonth")})]})]}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,l.jsx)(B,{className:"text-sm font-medium text-gray-500",children:a("indexCalculatorPage.additionalInvestmentGrowthRate")})}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(W,{value:w,onValueChange:e=>k(e||""),placeholder:"",prefix:"",readOnly:y,className:"text-sm md:text-sm flex p-2 h-10 md:h-10 w-full rounded-md border border-gray-300 focus:ring-2 focus:ring-gray-400 focus:border-gray-400 max-w-[80px] ".concat(y?"bg-gray-50 cursor-not-allowed":"")}),(0,l.jsx)("div",{className:"text-sm text-gray-500",children:a("indexCalculatorPage.perYear")})]})]}),(0,l.jsx)(g,{variant:"ghost",size:"sm",onClick:()=>N(!y),className:"mb-3 text-xs h-7 px-2 ".concat(y?"font-medium text-gray-900 bg-gray-100":"text-gray-500 opacity-90"),children:y?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(F.Z,{className:"h-3 w-3 mr-1"}),a("indexCalculatorPage.manualMode")]}):a("indexCalculatorPage.setManually")}),(parseInt(i)>0||y)&&(0,l.jsxs)(eL,{className:"border border-gray-200 rounded-lg",children:[(0,l.jsx)(eZ,{asChild:!0,children:(0,l.jsxs)(g,{variant:"ghost",className:"w-full justify-between p-3 md:p-4 hover:bg-gray-50",children:[(0,l.jsx)("span",{className:"text-sm font-medium",children:a("indexCalculatorPage.showAdditionalInvestments")}),(0,l.jsx)(eO.Z,{className:"h-4 w-4"})]})}),(0,l.jsxs)(e_,{className:"border-t border-gray-200",children:["each month"===j?(0,l.jsx)("div",{className:"space-y-4 p-4",children:Array.from({length:Math.ceil(C.length/12)},(e,t)=>{let s=12*t,r=Math.min(s+12,C.length),n=C.slice(s,r);return(0,l.jsxs)(eL,{className:"border border-gray-200 rounded-lg",children:[(0,l.jsx)(eZ,{asChild:!0,children:(0,l.jsxs)(g,{variant:"ghost",className:"w-full justify-between p-3 hover:bg-gray-50",children:[(0,l.jsxs)("span",{className:"text-sm font-medium",children:[a("indexCalculatorPage.yearHeader")," ",t+1]}),(0,l.jsx)(eO.Z,{className:"h-4 w-4"})]})}),(0,l.jsxs)(e_,{children:[(0,l.jsx)("div",{className:"hidden md:block",children:(0,l.jsxs)(eu,{children:[(0,l.jsx)(ep,{children:(0,l.jsxs)(ef,{children:[(0,l.jsx)(eb,{className:"w-auto px-4 py-3 text-sm bg-white font-medium",children:a("indexCalculatorPage.monthHeader")}),(0,l.jsx)(eb,{className:"w-[200px] px-4 py-3 text-sm bg-white font-medium text-right",children:a("indexCalculatorPage.amountHeader")}),(0,l.jsx)(eb,{className:"w-[50px] px-2 py-3 text-sm bg-white text-center",children:y&&a("indexCalculatorPage.actionsHeader")})]})}),(0,l.jsx)(eg,{children:n.map((e,t)=>{let a=s+t,r=a+1;return(0,l.jsxs)(ef,{className:"hover:bg-transparent",children:[(0,l.jsxs)(ej,{className:"px-7 py-3 text-sm font-medium",children:[M(t)," (",r,")"]}),(0,l.jsx)(ej,{className:"px-4 py-3 text-sm text-right",children:(0,l.jsx)(W,{value:e.amount,onValueChange:e=>A(a,e||""),placeholder:"",prefix:"",readOnly:!y,className:"text-right w-full h-10 text-sm px-3 ".concat(y?"border border-gray-200 rounded-md bg-white":"bg-transparent border-0 cursor-default")})}),(0,l.jsx)(ej,{className:"px-2 py-3 text-sm text-center",children:y&&(0,l.jsx)(g,{variant:"ghost",size:"sm",onClick:()=>E(a),className:"h-10 w-10 p-0 text-red-500 hover:text-red-700",children:(0,l.jsx)(O.Z,{className:"h-4 w-4"})})})]},a)})})]})}),(0,l.jsx)("div",{className:"md:hidden",children:(0,l.jsxs)(eu,{children:[(0,l.jsx)(ep,{children:(0,l.jsxs)(ef,{children:[(0,l.jsx)(eb,{className:"w-auto px-3 py-2 text-sm bg-white",children:a("indexCalculatorPage.monthHeader")}),(0,l.jsx)(eb,{className:"w-[120px] px-0.5 py-2 text-sm bg-white text-right",children:a("indexCalculatorPage.amountHeader")}),(0,l.jsx)(eb,{className:"w-[40px] px-0.5 py-2 text-sm bg-white"})]})}),(0,l.jsx)(eg,{children:n.map((e,t)=>{let a=s+t,r=a+1;return(0,l.jsxs)(ef,{className:"hover:bg-transparent",children:[(0,l.jsx)(ej,{className:"px-6 py-1.5",children:(0,l.jsxs)("div",{className:"text-sm font-medium",children:[M(t)," (",r,")"]})}),(0,l.jsx)(ej,{className:"px-0.5 py-1.5",children:(0,l.jsx)(W,{value:e.amount,onValueChange:e=>A(a,e||""),placeholder:"",prefix:"",readOnly:!y,className:"text-right w-full h-8 text-sm px-1.5 ".concat(y?"border border-gray-200 rounded-md bg-white":"bg-transparent border-0")})}),(0,l.jsx)(ej,{className:"px-0.5 py-1.5",children:y&&(0,l.jsx)(g,{variant:"ghost",size:"sm",onClick:()=>E(a),className:"h-8 w-8 p-0 shrink-0",children:(0,l.jsx)(O.Z,{className:"h-3.5 w-3.5 text-red-500"})})})]},a)})})]})})]})]},t)})}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"hidden md:block",children:(0,l.jsxs)(eu,{children:[(0,l.jsx)(ep,{children:(0,l.jsxs)(ef,{children:[(0,l.jsx)(eb,{className:"w-auto px-4 py-3 text-sm bg-white font-medium",children:a("indexCalculatorPage.yearHeader")}),(0,l.jsx)(eb,{className:"w-[200px] px-4 py-3 text-sm bg-white font-medium text-right",children:a("indexCalculatorPage.amountHeader")}),(0,l.jsx)(eb,{className:"w-[50px] px-2 py-3 text-sm bg-white text-center",children:y&&a("indexCalculatorPage.actionsHeader")})]})}),(0,l.jsx)(eg,{children:C.map((e,t)=>(0,l.jsxs)(ef,{className:"hover:bg-transparent",children:[(0,l.jsx)(ej,{className:"px-7 py-3 text-sm font-medium",children:t+1}),(0,l.jsx)(ej,{className:"px-4 py-3 text-sm text-right",children:(0,l.jsx)(W,{value:e.amount,onValueChange:e=>A(t,e||""),placeholder:"",prefix:"",readOnly:!y,className:"text-right w-full h-10 text-sm px-3 ".concat(y?"border border-gray-200 rounded-md bg-white":"bg-transparent border-0 cursor-default")})}),(0,l.jsx)(ej,{className:"px-2 py-3 text-sm text-center",children:y&&(0,l.jsx)(g,{variant:"ghost",size:"sm",onClick:()=>E(t),className:"h-10 w-10 p-0 text-red-500 hover:text-red-700",children:(0,l.jsx)(O.Z,{className:"h-4 w-4"})})})]},t))})]})}),(0,l.jsx)("div",{className:"md:hidden",children:(0,l.jsxs)(eu,{children:[(0,l.jsx)(ep,{children:(0,l.jsxs)(ef,{children:[(0,l.jsx)(eb,{className:"w-auto px-3 py-2 text-sm bg-white",children:a("indexCalculatorPage.yearHeader")}),(0,l.jsx)(eb,{className:"w-[120px] px-0.5 py-2 text-sm bg-white text-right",children:a("indexCalculatorPage.amountHeader")}),(0,l.jsx)(eb,{className:"w-[40px] px-0.5 py-2 text-sm bg-white"})]})}),(0,l.jsx)(eg,{children:C.map((e,t)=>(0,l.jsxs)(ef,{className:"hover:bg-transparent",children:[(0,l.jsx)(ej,{className:"px-6 py-1.5",children:(0,l.jsx)("div",{className:"text-sm font-medium",children:t+1})}),(0,l.jsx)(ej,{className:"px-0.5 py-1.5",children:(0,l.jsx)(W,{value:e.amount,onValueChange:e=>A(t,e||""),placeholder:"",prefix:"",readOnly:!y,className:"text-right w-full h-8 text-sm px-1.5 ".concat(y?"border border-gray-200 rounded-md bg-white":"bg-transparent border-0")})}),(0,l.jsx)(ej,{className:"px-0.5 py-1.5",children:y&&(0,l.jsx)(g,{variant:"ghost",size:"sm",onClick:()=>E(t),className:"h-8 w-8 p-0 shrink-0",children:(0,l.jsx)(O.Z,{className:"h-3.5 w-3.5 text-red-500"})})})]},t))})]})})]}),y&&(0,l.jsx)("div",{className:"p-3 border-t border-gray-200",children:(0,l.jsxs)(g,{variant:"outline",size:"sm",onClick:()=>{S([...C,{amount:""}])},className:"w-full",children:[(0,l.jsx)(H.Z,{className:"h-4 w-4 mr-2"}),"each month"===j?a("indexCalculatorPage.addMonth"):a("indexCalculatorPage.addYear")]})})]})]})]}),(0,l.jsx)(g,{className:"w-full bg-gray-900 hover:bg-gray-800 text-white py-3",onClick:()=>{L(Z())},children:a("common.calculate")}),z&&(0,l.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold mb-3",children:a("indexCalculatorPage.results")}),(0,l.jsx)("div",{className:"space-y-2",children:(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsxs)("span",{className:"text-gray-600",children:[a("indexCalculatorPage.finalBalance"),":"]}),(0,l.jsxs)("span",{className:"font-semibold",children:[z.finalBalance.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})," RUB"]})]})})]})]})})]})}function eD(){let[e,t]=(0,n.useState)("home");return(0,l.jsx)("div",{className:"min-h-screen bg-gray-50",children:(()=>{switch(e){case"home":default:return(0,l.jsx)(A,{onNavigate:t});case"portfolioAllocation":return(0,l.jsx)(ez,{onNavigate:t});case"indexCalculator":return(0,l.jsx)(eV,{onNavigate:t})}})()})}function eT(){return(0,l.jsx)(eD,{})}},94152:function(e,t,a){"use strict";a.d(t,{LanguageProvider:function(){return i},Z:function(){return o}});var s=a(57437),r=a(2265);let l={ru:{common:{enterAmount:"Введите сумму",calculate:"Рассчитать",warning:"Внимание",portfolio:"Портфель",totalAllocated:"Итого распределено",other:"Прочие",yes:"Да",no:"Нет"},homePage:{investorsCalculatorHeader:"Калькулятор инвестиций",portfolioAllocation:"Портфель",portfolioAllocationDescription:"Распределить сумму для покупки акций",investmentCalculator:"Калькулятор вложений",investmentCalculatorDescription:"Рассчитать сумму в конце периода"},months:{january:"Янв.",february:"Фев.",march:"Март",april:"Апр.",may:"Май",june:"Июнь",july:"Июль",august:"Авг.",september:"Сент.",october:"Окт.",november:"Нояб.",december:"Дек."},portfolioAllocation:{totalStocks:"Акций",portfolioDistributionByWeight:"Распределение по весу",totalWeight:"Вес",totalSum:"Сумма",header:"Портфель",investmentLabel:"Планирую инвестировать",portfolioHeader:"Состав портфеля",addRow:"Добавить строку",additionalCommands:"Дополнительно",distributeWeightsEvenly:"Распределить веса равномерно",copyIndexIMOEX:"Заполнить по индексу Мосбиржи",stock:"Акция",price:"Цена",weight:"Вес",lotSize:"Размер лота",lots:"Лоты",sum:"Сумма",stockHeader:"Акция",priceHeader:"Цена",weightHeader:"Вес",lotSizeHeader:"Размер лота",lotsHeader:"Лоты",sumHeader:"Сумма",lotsMobile:"Лоты:",sumMobile:"Сумма:"},allocationSummary:{header:"Итоги по портфелю",totalBudget:"К распределению",totalInvested:"Распределено",remaining:"Остаток",utilization:"Использовано средств"},indexCalculatorPage:{header:"Калькулятор вложений",initialInvestment:"Начальное вложение",duration:"Срок",years:"лет",months:"месяцев",indexCalculatorPage:"",interestRate:"Ставка",additionalInvestmentGrowthRate:"Индексация",perYear:"% годовых",reinvest:"Реинвестировать доход",additionalInvestment:"Доп. вложения",eachYear:"раз в год",eachMonth:"раз в месяц",showAdditionalInvestments:"Вложения",yearHeader:"Год",monthHeader:"Месяц",amountHeader:"Вложение",setManually:"Указать произвольные значения",manualMode:"Произвольный режим",addYear:"Добавить",actionsHeader:"",results:"Результаты",finalBalance:"Итоговая сумма",breakdown:"Изменение за период"},validation:{incompleteFields:"Значения (акция, цена и вес) должны быть заполнены во всех строках. Цена и вес должны быть положительными.",weightExceeds:"Общий вес превышает 100%",investmentRequired:"Введите сумму инвестиций"}},en:{common:{enterAmount:"Enter amount",calculate:"Calculate",warning:"Warning",portfolio:"Portfolio",totalAllocated:"Total Allocated",other:"Other",yes:"Yes",no:"No"},months:{january:"Jan",february:"Feb",march:"Mar",april:"Apr",may:"May",june:"Jun",july:"Jul",august:"Aug",september:"Sep",october:"Oct",november:"Nov",december:"Dec"},homePage:{investorsCalculatorHeader:"Investment calculator",portfolioAllocation:"Portfolio",portfolioAllocationDescription:"Plan your investment distribution",investmentCalculator:"Investment calculator",investmentCalculatorDescription:"Calculate expected returns"},portfolioAllocation:{totalStocks:"Stocks",totalWeight:"Weight",totalSum:"Sum",header:"Portfolio Allocation",investmentLabel:"Investment (planned)",portfolioHeader:"Portfolio",portfolioDistributionByWeight:"Distribution by weight",addRow:"Add Row",additionalCommands:"More",distributeWeightsEvenly:"Distribute weights evenly",copyIndexIMOEX:"Copy index IMOEX",stock:"Stock",price:"Price",weight:"Weight",lotSize:"Lot Size",lots:"Lots",sum:"Sum",stockHeader:"Stock",priceHeader:"Price",weightHeader:"Weight",lotSizeHeader:"Lot Size",lotsHeader:"Lots",sumHeader:"Sum",lotsMobile:"Lots:",sumMobile:"Sum:"},allocationSummary:{header:"Portfolio Summary",totalBudget:"Total Budget",totalInvested:"Total Invested",remaining:"Remaining",utilization:"Utilization"},validation:{incompleteFields:"Please fill in all required fields (stock, price, weight) with positive values for all rows",weightExceeds:"Total weight exceeds 100% (current: {current}%)",investmentRequired:"Please, enter an investment amount"},indexCalculatorPage:{header:"Investment calculator",initialInvestment:"Initial investment",duration:"Duration",years:"years",months:"months",indexCalculatorPage:"",interestRate:"Interest rate",additionalInvestmentGrowthRate:"Indexation",perYear:"% year",reinvest:"Reinvest",additionalInvestment:"Additional investment",eachYear:"each year",eachMonth:"each month",showAdditionalInvestments:"Additional investments",yearHeader:"Year",monthHeader:"Month",amountHeader:"Amount",setManually:"Set manually",addYear:"Add",actionsHeader:"",manualMode:"Manual mode",results:"Results",breakdown:"Breakdown",finalBalance:"Total amount"}}},n=(0,r.createContext)(void 0);function i(e){let{children:t}=e,[a,i]=(0,r.useState)(()=>"ru");return(0,s.jsx)(n.Provider,{value:{currentLanguage:a,changeLanguage:e=>{i(e)},t:e=>{let t=e.split("."),s=l[a];for(let a of t){if(!s||"object"!=typeof s||!(a in s))return console.warn("Translation key not found: ".concat(e)),e;s=s[a]}return"string"==typeof s?s:e}},children:t})}let o=()=>{let e=(0,r.useContext)(n);if(void 0===e)throw Error("useLanguage must be used within a LanguageProvider");return e}}},function(e){e.O(0,[877,971,117,744],function(){return e(e.s=31809)}),_N_E=e.O()}]);